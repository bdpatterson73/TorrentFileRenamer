<Window x:Class="TorrentFileRenamer.WPF.Views.LogViewerDialog"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   xmlns:vm="clr-namespace:TorrentFileRenamer.WPF.ViewModels"
   mc:Ignorable="d"
        Title="Application Logs" 
   Height="600" Width="1000"
        MinHeight="400" MinWidth="700"
      WindowStartupLocation="CenterOwner"
  ResizeMode="CanResize"
     ShowInTaskbar="False">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
<RowDefinition Height="Auto"/>
   <RowDefinition Height="*"/>
<RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
        
    <!-- Filter Panel -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
     <Grid.ColumnDefinitions>
     <ColumnDefinition Width="Auto"/>
 <ColumnDefinition Width="150"/>
    <ColumnDefinition Width="Auto"/>
   <ColumnDefinition Width="*"/>
         <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
       
  <TextBlock Grid.Column="0" 
   Text="Filter Level:" 
      VerticalAlignment="Center"
 Margin="0,0,10,0"/>
      
    <ComboBox Grid.Column="1" 
     ItemsSource="{Binding LogLevels}"
     SelectedItem="{Binding FilterLevel}"
 Style="{StaticResource ModernComboBox}"/>
            
  <TextBlock Grid.Column="2" 
      Text="Search:" 
          VerticalAlignment="Center"
      Margin="20,0,10,0"/>
      
 <TextBox Grid.Column="3" 
        Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
         Style="{StaticResource ModernTextBox}"
   Margin="0,0,10,0"/>
         
      <Button Grid.Column="4" 
  Content="Refresh" 
Command="{Binding RefreshCommand}"
    Style="{StaticResource SecondaryButton}"
       Width="80"/>
        </Grid>
        
     <!-- Log Entries DataGrid -->
        <DataGrid Grid.Row="1" 
     ItemsSource="{Binding LogEntries}"
               SelectedItem="{Binding SelectedLogEntry}"
    AutoGenerateColumns="False"
       IsReadOnly="True"
  Style="{StaticResource ModernDataGrid}"
      SelectionMode="Single"
      GridLinesVisibility="Horizontal"
    HorizontalGridLinesBrush="#E0E0E0">
            <DataGrid.Columns>
     <DataGridTextColumn Header="Timestamp" 
     Binding="{Binding Timestamp, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"
  Width="150"/>
 <DataGridTextColumn Header="Level" 
  Binding="{Binding Level}"
 Width="80">
 <DataGridTextColumn.ElementStyle>
    <Style TargetType="TextBlock">
  <Setter Property="FontWeight" Value="Bold"/>
          <Style.Triggers>
       <DataTrigger Binding="{Binding Level}" Value="ERROR">
 <Setter Property="Foreground" Value="Red"/>
  </DataTrigger>
     <DataTrigger Binding="{Binding Level}" Value="WARN">
    <Setter Property="Foreground" Value="Orange"/>
       </DataTrigger>
  <DataTrigger Binding="{Binding Level}" Value="INFO">
          <Setter Property="Foreground" Value="Blue"/>
               </DataTrigger>
      <DataTrigger Binding="{Binding Level}" Value="DEBUG">
     <Setter Property="Foreground" Value="Gray"/>
  </DataTrigger>
      </Style.Triggers>
  </Style>
       </DataGridTextColumn.ElementStyle>
             </DataGridTextColumn>
                <DataGridTextColumn Header="Context" 
       Binding="{Binding Context}"
 Width="120"/>
         <DataGridTextColumn Header="Message" 
       Binding="{Binding Message}"
      Width="*"/>
            </DataGrid.Columns>
      </DataGrid>
        
    <!-- Button Panel -->
     <Grid Grid.Row="2" Margin="0,10,0,0">
   <Grid.ColumnDefinitions>
     <ColumnDefinition Width="Auto"/>
     <ColumnDefinition Width="Auto"/>
  <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
</Grid.ColumnDefinitions>
    
            <Button Grid.Column="0" 
    Content="Clear Logs" 
       Command="{Binding ClearLogsCommand}"
  Style="{StaticResource SecondaryButton}"
       Width="100"
      Margin="0,0,10,0"/>
   
 <Button Grid.Column="1" 
          Content="Export..." 
        Command="{Binding ExportLogsCommand}"
 Style="{StaticResource SecondaryButton}"
       Width="100"/>
    
    <Button Grid.Column="3" 
      Content="Close" 
     Command="{Binding CloseCommand}"
  Style="{StaticResource PrimaryButton}"
          IsCancel="True"
      Width="80"/>
   </Grid>
 </Grid>
</Window>
