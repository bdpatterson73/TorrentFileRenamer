<UserControl x:Class="TorrentFileRenamer.WPF.Views.Controls.StatsWidget"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:viewmodels="clr-namespace:TorrentFileRenamer.WPF.ViewModels"
          mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance Type=viewmodels:StatsViewModel}"
   d:DesignHeight="120" d:DesignWidth="800">

    <Border Style="{StaticResource CardContainer}"
       Margin="16,8"
 Visibility="{Binding IsVisible, Converter={StaticResource BoolToVisibilityConverter}}">
        
     <Grid>
        <Grid.RowDefinitions>
         <RowDefinition Height="Auto"/> <!-- Header -->
      <RowDefinition Height="Auto"/> <!-- Content -->
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,12">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
     <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>

        <!-- Icon and Title -->
          <StackPanel Grid.Column="0" Orientation="Horizontal">
  <TextBlock Text="??" FontSize="20" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBlock Text="Statistics" 
       Style="{StaticResource CardTitle}"
  VerticalAlignment="Center"/>
   </StackPanel>

        <!-- Last Updated -->
     <TextBlock Grid.Column="1"
             Text="{Binding LastRefreshText, StringFormat='Updated {0}'}"
      Style="{StaticResource CardMetadata}"
    VerticalAlignment="Center"
     Margin="16,0,0,0"/>

         <!-- Refresh Button -->
<Button Grid.Column="2"
      Content="??"
    Command="{Binding RefreshCommand}"
         Style="{StaticResource SecondaryButton}"
             Padding="8,4"
   FontSize="14"
    Margin="0,0,8,0"
     ToolTip="Refresh statistics"/>

          <!-- Collapse/Expand Button -->
                <Button Grid.Column="3"
       Content="{Binding IsExpanded, Converter={StaticResource BoolToStringConverter}, ConverterParameter='??|??'}"
             Command="{Binding ToggleExpandCommand}"
             Style="{StaticResource SecondaryButton}"
        Padding="8,4"
       FontSize="14"
                 ToolTip="Toggle details"/>
            </Grid>

    <!-- Content -->
       <Grid Grid.Row="1"
         Visibility="{Binding IsExpanded, Converter={StaticResource BoolToVisibilityConverter}}">
     <Grid.ColumnDefinitions>
     <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>

         <!-- Total Files -->
   <Border Grid.Column="0" Style="{StaticResource StatCard}">
       <StackPanel>
          <TextBlock Text="{Binding Statistics.TotalFiles}"
         Style="{StaticResource StatValue}"/>
     <TextBlock Text="Total Files"
             Style="{StaticResource StatLabel}"/>
          </StackPanel>
     </Border>

     <!-- Processed -->
      <Border Grid.Column="1" Style="{StaticResource StatCard}">
                 <StackPanel>
     <TextBlock Text="{Binding Statistics.ProcessedFiles}"
    Style="{StaticResource StatValue}"
  Foreground="{StaticResource SuccessBrush}"/>
       <TextBlock Text="Processed"
     Style="{StaticResource StatLabel}"/>
         </StackPanel>
   </Border>

           <!-- Pending -->
   <Border Grid.Column="2" Style="{StaticResource StatCard}">
       <StackPanel>
    <TextBlock Text="{Binding Statistics.PendingFiles}"
   Style="{StaticResource StatValue}"
             Foreground="{StaticResource WarningBrush}"/>
         <TextBlock Text="Pending"
            Style="{StaticResource StatLabel}"/>
           </StackPanel>
  </Border>

         <!-- Errors -->
        <Border Grid.Column="3" Style="{StaticResource StatCard}">
         <StackPanel>
       <TextBlock Text="{Binding Statistics.ErrorFiles}"
          Style="{StaticResource StatValue}"
 Foreground="{StaticResource ErrorBrush}"/>
                <TextBlock Text="Errors"
   Style="{StaticResource StatLabel}"/>
   </StackPanel>
         </Border>

     <!-- Total Size -->
    <Border Grid.Column="4" Style="{StaticResource StatCard}">
        <StackPanel>
  <TextBlock Text="{Binding Statistics.FileSizeText}"
Style="{StaticResource StatValue}"/>
    <TextBlock Text="Total Size"
     Style="{StaticResource StatLabel}"/>
    </StackPanel>
       </Border>
     </Grid>
        </Grid>
    </Border>
</UserControl>
