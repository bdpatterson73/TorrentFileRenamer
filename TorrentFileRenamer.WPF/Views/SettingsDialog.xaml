<Window x:Class="TorrentFileRenamer.WPF.Views.SettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
     xmlns:vm="clr-namespace:TorrentFileRenamer.WPF.ViewModels"
        mc:Ignorable="d"
        Title="Settings" 
      Height="700" Width="850"
        MinHeight="600" MinWidth="750"
        WindowStartupLocation="CenterOwner"
 ResizeMode="CanResize"
        ShowInTaskbar="False"
        Background="{StaticResource SurfaceBrush}"
        d:DataContext="{d:DesignInstance Type=vm:SettingsViewModel}">
    
 <Window.Resources>
        <!-- Modern Section Card Style -->
        <Style x:Key="SettingsCard" TargetType="Border" BasedOn="{StaticResource FileCard}">
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="Background" Value="White"/>
        </Style>
        
        <!-- Section Header Style -->
<Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
         <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>
        
        <!-- Section Subheader Style -->
      <Style x:Key="SectionSubheader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
 <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <!-- Setting Label Style -->
        <Style x:Key="SettingLabel" TargetType="TextBlock">
    <Setter Property="FontSize" Value="13"/>
       <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
        
     <!-- Setting Description Style -->
        <Style x:Key="SettingDescription" TargetType="TextBlock">
  <Setter Property="FontSize" Value="11"/>
 <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
<Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,2,0,0"/>
        </Style>
        
        <!-- Modern TextBox Style -->
        <Style x:Key="ModernSettingTextBox" TargetType="TextBox">
      <Setter Property="Padding" Value="10,8"/>
        <Setter Property="FontSize" Value="13"/>
     <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
         <Setter Property="Background" Value="White"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Style.Triggers>
     <Trigger Property="IsMouseOver" Value="True">
             <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
          </Trigger>
         <Trigger Property="IsFocused" Value="True">
 <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
       </Trigger>
  </Style.Triggers>
   </Style>
        
    <!-- Modern CheckBox Style -->
        <Style x:Key="ModernSettingCheckBox" TargetType="CheckBox">
      <Setter Property="FontSize" Value="13"/>
       <Setter Property="Margin" Value="0,8,0,8"/>
          <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
 
        <!-- Icon Text Style -->
 <Style x:Key="IconText" TargetType="TextBlock">
     <Setter Property="FontSize" Value="16"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
         <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>
        
        <!-- Path Row Style -->
        <Style x:Key="PathInputGrid" TargetType="Grid">
         <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>
    </Window.Resources>
    
    <Grid>
      <Grid.RowDefinitions>
     <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="*"/>    <!-- Content -->
<RowDefinition Height="Auto"/> <!-- Footer Buttons -->
        </Grid.RowDefinitions>
        
        <!-- Header with gear icon -->
        <Border Grid.Row="0" 
 Background="{StaticResource PrimaryBrush}"
    Padding="24,20">
  <Grid>
         <Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto"/>
<ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
       
<!-- GEAR ICON using Unicode -->
<TextBlock Grid.Column="0"
    Text="&#x2699;&#xFE0F;"
   FontSize="32"
      Foreground="White"
   VerticalAlignment="Center"
          Margin="0,0,16,0"/>

     <StackPanel Grid.Column="1" VerticalAlignment="Center">
             <TextBlock Text="Settings" 
        FontSize="24" 
 FontWeight="SemiBold"
        Foreground="White"/>
           <TextBlock Text="Configure application preferences and behavior" 
            FontSize="12"
              Foreground="#E3F2FD"
  Margin="0,4,0,0"/>
 </StackPanel>
     </Grid>
  </Border>
        
        <!-- Settings Content -->
        <TabControl Grid.Row="1" 
             Style="{StaticResource ModernTabControl}"
           Margin="0"
       Background="{StaticResource SurfaceBrush}">
         
 <!-- General Tab -->
   <TabItem Header="General" Style="{StaticResource ModernTabItem}">
             <ScrollViewer VerticalScrollBarVisibility="Auto"
                  Padding="20"
      Background="{StaticResource SurfaceBrush}">
       <StackPanel>
  <!-- Default Paths Section -->
 <Border Style="{StaticResource SettingsCard}">
      <StackPanel>
     <TextBlock Text="&#x1F4C1; Default Paths" Style="{StaticResource SectionHeader}"/>
     
       <TextBlock Text="Default Source Path" Style="{StaticResource SettingLabel}"/>
       <Grid Style="{StaticResource PathInputGrid}">
          <Grid.ColumnDefinitions>
       <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
      <TextBox Grid.Column="0" 
        Text="{Binding DefaultSourcePath, UpdateSourceTrigger=PropertyChanged}"
        Style="{StaticResource ModernSettingTextBox}"/>
             <Button Grid.Column="1" 
          Content="Browse..." 
 Command="{Binding BrowseSourcePathCommand}"
          Style="{StaticResource SecondaryButton}"
         Margin="8,0,0,8"
       Width="90"/>
   </Grid>
    
         <TextBlock Text="Default Destination Path" Style="{StaticResource SettingLabel}"/>
              <Grid Style="{StaticResource PathInputGrid}">
   <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>
<TextBox Grid.Column="0" 
    Text="{Binding DefaultDestinationPath, UpdateSourceTrigger=PropertyChanged}"
            Style="{StaticResource ModernSettingTextBox}"/>
  <Button Grid.Column="1" 
        Content="Browse..." 
     Command="{Binding BrowseDestinationPathCommand}"
               Style="{StaticResource SecondaryButton}"
  Margin="8,0,0,8"
               Width="90"/>
            </Grid>
     </StackPanel>
         </Border>
       
    <!-- File Extensions Section -->
     <Border Style="{StaticResource SettingsCard}">
        <StackPanel>
        <TextBlock Text="?? File Extensions" Style="{StaticResource SectionHeader}"/>
 
       <TextBlock Text="Default File Extensions" Style="{StaticResource SettingLabel}"/>
  <TextBox Text="{Binding DefaultFileExtensions, UpdateSourceTrigger=PropertyChanged}"
  Style="{StaticResource ModernSettingTextBox}"/>
        <TextBlock Text="Enter semicolon-separated extensions (e.g., *.mp4;*.mkv;*.avi;*.m4v)" 
  Style="{StaticResource SettingDescription}"/>
 </StackPanel>
      </Border>
                
             <!-- Preferences Section -->
         <Border Style="{StaticResource SettingsCard}">
        <StackPanel>
       <TextBlock Text="? Preferences" Style="{StaticResource SectionHeader}"/>
        
          <CheckBox Content="Remember last used paths between sessions" 
          IsChecked="{Binding RememberLastPaths}"
 Style="{StaticResource ModernSettingCheckBox}"/>
      <TextBlock Text="When enabled, the application will remember your last source and destination folders" 
        Style="{StaticResource SettingDescription}"
       Margin="24,0,0,8"/>
      </StackPanel>
     </Border>
     
   <!-- Processing Settings Section -->
 <Border Style="{StaticResource SettingsCard}">
    <StackPanel>
       <TextBlock Text="?? Processing Options" Style="{StaticResource SectionHeader}"/>
        
                <CheckBox Content="Simulate Mode (Test Without Modifying Files)" 
   IsChecked="{Binding SimulateMode}"
           Style="{StaticResource ModernSettingCheckBox}"/>
               <TextBlock Text="When enabled, files will be scanned and processing will be simulated without actually copying or deleting any files. Perfect for testing your configuration before committing to real file operations." 
                 Style="{StaticResource SettingDescription}"
          Margin="24,0,0,16"/>
                  
  <TextBlock Text="File Verification Method" Style="{StaticResource SettingLabel}"/>
             <ComboBox SelectedValue="{Binding FileVerificationMethod, Mode=TwoWay}"
     SelectedValuePath="Tag"
  Style="{StaticResource ModernComboBox}"
Margin="0,0,0,8">
           <ComboBoxItem Content="File Size Only (Fast)" Tag="FileSize"/>
     <ComboBoxItem Content="MD5 Checksum (Thorough)" Tag="Checksum"/>
     </ComboBox>
    <TextBlock Text="File Size Only: Quick verification by comparing file sizes. MD5 Checksum: Thorough verification using MD5 hash comparison (slower but more accurate for large files)." 
              Style="{StaticResource SettingDescription}"
         Margin="0,0,0,8"/>
          </StackPanel>
         </Border>
      </StackPanel>
    </ScrollViewer>
          </TabItem>
       
            <!-- Logging Tab -->
       <TabItem Header="Logging" Style="{StaticResource ModernTabItem}">
       <ScrollViewer VerticalScrollBarVisibility="Auto"
       Padding="20"
          Background="{StaticResource SurfaceBrush}">
     <StackPanel>
    <!-- Logging Configuration -->
   <Border Style="{StaticResource SettingsCard}">
        <StackPanel>
         <TextBlock Text="?? Logging Configuration" Style="{StaticResource SectionHeader}"/>
          
          <CheckBox Content="Enable application logging" 
        IsChecked="{Binding EnableLogging}"
                Style="{StaticResource ModernSettingCheckBox}"/>
      <TextBlock Text="Logs help troubleshoot issues and track application activity" 
      Style="{StaticResource SettingDescription}"
  Margin="24,0,0,16"/>
             
   <TextBlock Text="Log Retention Period (days)" Style="{StaticResource SettingLabel}"/>
  <Grid>
         <Grid.ColumnDefinitions>
              <ColumnDefinition Width="120"/>
      <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
     <TextBox Grid.Column="0"
        Text="{Binding LogRetentionDays, UpdateSourceTrigger=PropertyChanged}"
             Style="{StaticResource ModernSettingTextBox}"
         HorizontalAlignment="Left"/>
       <TextBlock Grid.Column="1"
      Text="Logs older than this will be automatically deleted"
                 Style="{StaticResource SettingDescription}"
          VerticalAlignment="Center"
   Margin="12,0,0,0"/>
           </Grid>
        </StackPanel>
  </Border>
     
       <!-- Info Panel -->
        <Border Background="#E3F2FD"
       BorderBrush="{StaticResource PrimaryBrush}"
  BorderThickness="1"
       CornerRadius="8"
  Padding="16">
      <StackPanel>
  <TextBlock Text="? About Logging" 
  FontSize="14"
    FontWeight="SemiBold"
         Foreground="{StaticResource PrimaryBrush}"
            Margin="0,0,0,8"/>
       <TextBlock TextWrapping="Wrap" 
               FontSize="12"
      Foreground="{StaticResource TextPrimaryBrush}">
 Application logs are stored locally and contain information about operations, errors, and system events. 
      Logs are useful for debugging issues and understanding application behavior. 
         Valid retention period: 1-365 days.
       </TextBlock>
             </StackPanel>
       </Border>
        </StackPanel>
        </ScrollViewer>
    </TabItem>
            
     <!-- Plex Tab -->
  <TabItem Header="Plex" Style="{StaticResource ModernTabItem}">
     <ScrollViewer VerticalScrollBarVisibility="Auto"
 Padding="20"
             Background="{StaticResource SurfaceBrush}">
       <StackPanel>
     <!-- Plex Settings -->
              <Border Style="{StaticResource SettingsCard}">
     <StackPanel>
   <TextBlock Text="?? Plex Compatibility" Style="{StaticResource SectionHeader}"/>
       
         <CheckBox Content="Enable Plex compatibility validation" 
             IsChecked="{Binding EnablePlexValidation}"
         Style="{StaticResource ModernSettingCheckBox}"/>
             <TextBlock Text="Validates file names against Plex naming conventions" 
   Style="{StaticResource SettingDescription}"
             Margin="24,0,0,16"/>
  
            <CheckBox Content="Automatically fix Plex compatibility issues" 
     IsChecked="{Binding AutoFixPlexIssues}"
    Style="{StaticResource ModernSettingCheckBox}"
    Margin="24,0,0,0"
             IsEnabled="{Binding EnablePlexValidation}"/>
        <TextBlock Text="Automatically corrects common naming issues" 
         Style="{StaticResource SettingDescription}"
  Margin="48,0,0,16"/>
              
         <CheckBox Content="Prompt user before fixing Plex issues" 
         IsChecked="{Binding PromptForPlexIssues}"
            Style="{StaticResource ModernSettingCheckBox}"
         Margin="24,0,0,0"
             IsEnabled="{Binding EnablePlexValidation}"/>
   <TextBlock Text="Shows a confirmation dialog before applying fixes" 
            Style="{StaticResource SettingDescription}"
          Margin="48,0,0,16"/>
     
     <CheckBox Content="Skip Plex-incompatible files in auto-monitor mode" 
    IsChecked="{Binding SkipPlexIncompatibleInAutoMode}"
         Style="{StaticResource ModernSettingCheckBox}"
              Margin="24,0,0,0"
            IsEnabled="{Binding EnablePlexValidation}"/>
               <TextBlock Text="Incompatible files will be logged but not processed" 
    Style="{StaticResource SettingDescription}"
    Margin="48,0,0,8"/>
              </StackPanel>
    </Border>
          
      <!-- Info Panel -->
         <Border Background="#FFF3E0"
 BorderBrush="{StaticResource WarningBrush}"
       BorderThickness="1"
      CornerRadius="8"
    Padding="16">
         <StackPanel>
        <TextBlock Text="?? About Plex Compatibility" 
   FontSize="14"
    FontWeight="SemiBold"
        Foreground="{StaticResource WarningBrush}"
  Margin="0,0,0,8"/>
          <TextBlock TextWrapping="Wrap" 
       FontSize="12"
             Foreground="{StaticResource TextPrimaryBrush}">
       Plex Media Server requires specific naming conventions for TV episodes and movies to properly identify and organize content.
      <LineBreak/><LineBreak/>
  <Bold>Common issues detected and fixed:</Bold><LineBreak/>
      - Special characters that may cause problems<LineBreak/>
        - Invalid season/episode number formats<LineBreak/>
       - Missing or incorrect metadata<LineBreak/>
          - Year format inconsistencies<LineBreak/><LineBreak/>
         For best results, enable automatic fixing with user prompts to review changes before they're applied.
  </TextBlock>
    </StackPanel>
   </Border>
       </StackPanel>
    </ScrollViewer>
    </TabItem>
            
  <!-- Auto-Monitor Tab -->
            <TabItem Header="Auto-Monitor" Style="{StaticResource ModernTabItem}">
         <ScrollViewer VerticalScrollBarVisibility="Auto"
       Padding="20"
               Background="{StaticResource SurfaceBrush}">
   <StackPanel>
        <!-- Folder Settings -->
           <Border Style="{StaticResource SettingsCard}">
     <StackPanel>
      <TextBlock Text="?? Monitoring Folders" Style="{StaticResource SectionHeader}"/>
  
               <TextBlock Text="Watch Folder" Style="{StaticResource SettingLabel}"/>
 <Grid Style="{StaticResource PathInputGrid}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
               <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
    <TextBox Grid.Column="0" 
Text="{Binding WatchFolder, UpdateSourceTrigger=PropertyChanged}"
       Style="{StaticResource ModernSettingTextBox}"/>
    <Button Grid.Column="1" 
     Content="Browse..." 
        Command="{Binding BrowseWatchFolderCommand}"
              Style="{StaticResource SecondaryButton}"
           Margin="8,0,0,8"
      Width="90"/>
     </Grid>
 
         <TextBlock Text="Destination Folder" Style="{StaticResource SettingLabel}"/>
      <Grid Style="{StaticResource PathInputGrid}">
    <Grid.ColumnDefinitions>
       <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
         </Grid.ColumnDefinitions>
       <TextBox Grid.Column="0" 
   Text="{Binding DestinationFolder, UpdateSourceTrigger=PropertyChanged}"
   Style="{StaticResource ModernSettingTextBox}"/>
            <Button Grid.Column="1" 
   Content="Browse..." 
          Command="{Binding BrowseMonitorDestinationCommand}"
          Style="{StaticResource SecondaryButton}"
              Margin="8,0,0,8"
Width="90"/>
          </Grid>
             
    <TextBlock Text="File Extensions" Style="{StaticResource SettingLabel}"/>
       <TextBox Text="{Binding FileExtensions, UpdateSourceTrigger=PropertyChanged}"
               Style="{StaticResource ModernSettingTextBox}"/>
  <TextBlock Text="Semicolon-separated extensions to monitor (e.g., *.mp4;*.mkv)" 
        Style="{StaticResource SettingDescription}"/>
            </StackPanel>
        </Border>
              
   <!-- Behavior Settings -->
      <Border Style="{StaticResource SettingsCard}">
      <StackPanel>
       <TextBlock Text="? Monitoring Behavior" Style="{StaticResource SectionHeader}"/>
     
          <TextBlock Text="File Stability Delay (seconds)" Style="{StaticResource SettingLabel}"/>
              <Grid>
      <Grid.RowDefinitions>
   <RowDefinition Height="Auto"/>
     <RowDefinition Height="Auto"/>
   </Grid.RowDefinitions>
     
            <Slider Grid.Row="0"
   Value="{Binding StabilityDelaySeconds}" 
 Minimum="5" 
      Maximum="300" 
     TickFrequency="5"
       IsSnapToTickEnabled="True"
      Margin="0,0,0,8"/>
    
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,8">
          <TextBlock Text="? Current value: " 
    Style="{StaticResource SettingDescription}"
    VerticalAlignment="Center"/>
        <TextBlock Text="{Binding StabilityDelaySeconds}" 
FontSize="13"
    FontWeight="SemiBold"
              Foreground="{StaticResource PrimaryBrush}"
              VerticalAlignment="Center"
         Margin="4,0"/>
           <TextBlock Text="seconds" 
    Style="{StaticResource SettingDescription}"
 VerticalAlignment="Center"/>
   </StackPanel>
       </Grid>
         <TextBlock Text="Wait time to ensure files are fully written before processing" 
                Style="{StaticResource SettingDescription}"
        Margin="0,0,0,16"/>
       
    <TextBlock Text="Maximum Log Entries" Style="{StaticResource SettingLabel}"/>
               <Grid>
          <Grid.ColumnDefinitions>
     <ColumnDefinition Width="120"/>
          <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0"
 Text="{Binding MaxAutoMonitorLogEntries, UpdateSourceTrigger=PropertyChanged}"
           Style="{StaticResource ModernSettingTextBox}"
       HorizontalAlignment="Left"/>
          <TextBlock Grid.Column="1"
           Text="Maximum number of activity log entries to display (1-100)"
        Style="{StaticResource SettingDescription}"
      VerticalAlignment="Center"
      Margin="12,0,0,0"/>
         </Grid>
                 </StackPanel>
       </Border>

             <!-- Options -->
    <Border Style="{StaticResource SettingsCard}">
         <StackPanel>
        <TextBlock Text="?? Options" Style="{StaticResource SectionHeader}"/>
        
               <CheckBox Content="Auto-start monitoring when application loads" 
      IsChecked="{Binding AutoStartOnLoad}"
             Style="{StaticResource ModernSettingCheckBox}"/>
  <TextBlock Text="Automatically begin monitoring on application startup" 
    Style="{StaticResource SettingDescription}"
    Margin="24,0,0,16"/>
         
       <CheckBox Content="Process subfolders recursively" 
    IsChecked="{Binding ProcessSubfolders}"
                  Style="{StaticResource ModernSettingCheckBox}"/>
        <TextBlock Text="Monitor and process files in all subdirectories of the watch folder" 
 Style="{StaticResource SettingDescription}"
    Margin="24,0,0,8"/>
           </StackPanel>
     </Border>
              </StackPanel>
              </ScrollViewer>
         </TabItem>
       
    <!-- Advanced Tab (New) -->
        <TabItem Header="Advanced" Style="{StaticResource ModernTabItem}">
            <ScrollViewer VerticalScrollBarVisibility="Auto"
                    Padding="20"
        Background="{StaticResource SurfaceBrush}">
           <StackPanel>
     <!-- Settings Management -->
     <Border Style="{StaticResource SettingsCard}">
 <StackPanel>
     <TextBlock Text="?? Settings Management" Style="{StaticResource SectionHeader}"/>
             
  <TextBlock Text="Backup and restore your configuration settings" 
            Style="{StaticResource SettingDescription}"
       Margin="0,0,0,16"/>
     
             <Grid>
    <Grid.ColumnDefinitions>
   <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
   
     <Button Grid.Column="0"
 Content="?? Export Settings"
   Command="{Binding ExportSettingsCommand}"
           Style="{StaticResource SecondaryButton}"
          Margin="0,0,8,0"
    HorizontalAlignment="Stretch"/>
         
       <Button Grid.Column="1"
   Content="?? Import Settings"
    Command="{Binding ImportSettingsCommand}"
   Style="{StaticResource SecondaryButton}"
        Margin="8,0,0,0"
               HorizontalAlignment="Stretch"/>
            </Grid>
         </StackPanel>
   </Border>
      
  <!-- Presets -->
          <Border Style="{StaticResource SettingsCard}">
        <StackPanel>
      <TextBlock Text="?? Quick Presets" Style="{StaticResource SectionHeader}"/>
     
        <TextBlock Text="Apply predefined configuration templates" 
                Style="{StaticResource SettingDescription}"
       Margin="0,0,0,16"/>
         
    <Button Content="? Basic Configuration"
    Command="{Binding ApplyBasicPresetCommand}"
   Style="{StaticResource SecondaryButton}"
      HorizontalAlignment="Stretch"
           Margin="0,0,0,8"/>
<TextBlock Text="Simple setup for general media file renaming" 
     Style="{StaticResource SettingDescription}"
        Margin="8,0,0,16"/>
         
    <Button Content="?? Advanced Configuration"
        Command="{Binding ApplyAdvancedPresetCommand}"
      Style="{StaticResource SecondaryButton}"
      HorizontalAlignment="Stretch"
   Margin="0,0,0,8"/>
           <TextBlock Text="Full feature set with monitoring and detailed logging" 
  Style="{StaticResource SettingDescription}"
       Margin="8,0,0,16"/>
       
             <Button Content="?? Plex-Optimized Configuration"
    Command="{Binding ApplyPlexPresetCommand}"
             Style="{StaticResource SecondaryButton}"
          HorizontalAlignment="Stretch"
              Margin="0,0,0,8"/>
 <TextBlock Text="Best settings for Plex Media Server compatibility" 
             Style="{StaticResource SettingDescription}"
           Margin="8,0,0,8"/>
               </StackPanel>
   </Border>
    
          <!-- Warning Panel -->
           <Border Background="#FFEBEE"
     BorderBrush="{StaticResource ErrorBrush}"
   BorderThickness="1"
        CornerRadius="8"
              Padding="16">
      <StackPanel>
       <TextBlock Text="? Warning" 
           FontSize="14"
FontWeight="SemiBold"
          Foreground="{StaticResource ErrorBrush}"
     Margin="0,0,0,8"/>
     <TextBlock TextWrapping="Wrap" 
       FontSize="12"
            Foreground="{StaticResource TextPrimaryBrush}">
         Importing settings or applying presets will overwrite your current configuration. 
Consider exporting your current settings first to create a backup.
   </TextBlock>
         </StackPanel>
        </Border>
    </StackPanel>
             </ScrollViewer>
  </TabItem>
        </TabControl>
        
        <!-- Footer Buttons -->
   <Border Grid.Row="2" 
         Background="White"
  BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0"
           Padding="20,16">
      <Grid>
                <Grid.ColumnDefinitions>
         <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
         <ColumnDefinition Width="Auto"/>
   </Grid.ColumnDefinitions>
     
            <Button Grid.Column="0" 
       Content="?? Reset to Defaults" 
   Command="{Binding ResetToDefaultsCommand}"
    Style="{StaticResource SecondaryButton}"
   Width="150"/>
     
    <Button Grid.Column="2" 
     Content="? Save" 
        Command="{Binding SaveCommand}"
       Style="{StaticResource PrimaryButton}"
        IsDefault="True"
        Width="100"
          Margin="0,0,12,0"/>
     
                <Button Grid.Column="3" 
  Content="Cancel" 
              Command="{Binding CancelCommand}"
           Style="{StaticResource SecondaryButton}"
                     IsCancel="True"
             Width="100"/>
         </Grid>
        </Border>
    </Grid>
</Window>
