<Window x:Class="TorrentFileRenamer.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   xmlns:vm="clr-namespace:TorrentFileRenamer.WPF.ViewModels"
        xmlns:views="clr-namespace:TorrentFileRenamer.WPF.Views"
        xmlns:controls="clr-namespace:TorrentFileRenamer.WPF.Views.Controls"
        mc:Ignorable="d"
        Title="TorrentFileRenamer - WPF" 
      Height="700" Width="1200"
        MinHeight="600" MinWidth="900"
        WindowStartupLocation="CenterScreen"
      d:DataContext="{d:DesignInstance Type=vm:MainViewModel}">
  
    <Window.InputBindings>
     <!-- Global keyboard shortcuts -->
        <KeyBinding Key="S" Modifiers="Control" Command="{Binding ScanCommand}" />
        <KeyBinding Key="P" Modifiers="Control" Command="{Binding ProcessCommand}" />
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}" />
  <KeyBinding Key="OemComma" Modifiers="Control" Command="{Binding ShowSettingsCommand}" />
        <KeyBinding Key="F1" Command="{Binding ShowKeyboardShortcutsCommand}" />
        <KeyBinding Key="D1" Modifiers="Control" Command="{Binding SwitchToTvTabCommand}" />
        <KeyBinding Key="D2" Modifiers="Control" Command="{Binding SwitchToMoviesTabCommand}" />
    <KeyBinding Key="D3" Modifiers="Control" Command="{Binding SwitchToAutoMonitorTabCommand}" />
        
      <!-- Phase 6: Search & Filter keyboard shortcuts -->
        <KeyBinding Key="F" Modifiers="Control" Command="{Binding ToggleSearchCommand}" />
        <KeyBinding Key="F" Modifiers="Control+Shift" Command="{Binding ToggleAdvancedFilterCommand}" />
        <KeyBinding Key="E" Modifiers="Control" Command="{Binding FocusSearchCommand}" />
        
<!-- Phase 7: Export keyboard shortcut -->
        <KeyBinding Key="E" Modifiers="Control+Shift" Command="{Binding ShowExportCommand}" />
    </Window.InputBindings>
    
    <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/> <!-- Menu -->
      <RowDefinition Height="Auto"/> <!-- Toolbar -->
   <RowDefinition Height="Auto"/> <!-- Search Panel (Phase 6) -->
            <RowDefinition Height="*"/> <!-- Content -->
    <RowDefinition Height="Auto"/> <!-- Status Bar -->
        </Grid.RowDefinitions>

        <!-- Menu Bar -->
   <Menu Grid.Row="0" Style="{StaticResource ModernMenu}">
  <MenuItem Header="_File">
  <MenuItem Header="_Settings" 
      Command="{Binding ShowSettingsCommand}"
    InputGestureText="Ctrl+,">
           <MenuItem.Icon>
       <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
    </MenuItem.Icon>
  </MenuItem>
   <Separator/>
    <MenuItem Header="E_xit" Command="{Binding ExitCommand}">
<MenuItem.Icon>
   <TextBlock Text="&#xE8BB;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
     </MenuItem.Icon>
  </MenuItem>
      </MenuItem>
         <MenuItem Header="_Edit">
   <MenuItem Header="Select _All" InputGestureText="Ctrl+A"/>
  <MenuItem Header="_Clear" InputGestureText="Ctrl+D"/>
   </MenuItem>
   <MenuItem Header="_Tools">
         <MenuItem Header="_Options" Command="{Binding ShowSettingsCommand}"/>
      <MenuItem Header="_View Logs" Command="{Binding ShowLogsCommand}">
  <MenuItem.Icon>
   <TextBlock Text="&#xE7C3;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
     </MenuItem.Icon>
  </MenuItem>
   </MenuItem>
       <MenuItem Header="_Help">
 <MenuItem Header="_Keyboard Shortcuts" 
   Command="{Binding ShowKeyboardShortcutsCommand}"
         InputGestureText="F1">
     <MenuItem.Icon>
      <TextBlock Text="&#xE765;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
    </MenuItem.Icon>
  </MenuItem>
   <MenuItem Header="_Documentation" Command="{Binding ShowDocumentationCommand}">
   <MenuItem.Icon>
   <TextBlock Text="&#xE8A5;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
         </MenuItem.Icon>
</MenuItem>
       <Separator/>
        <MenuItem Header="_About" Command="{Binding ShowAboutCommand}">
        <MenuItem.Icon>
  <TextBlock Text="&#xE946;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
   </MenuItem.Icon>
     </MenuItem>
       </MenuItem>
        </Menu>

   <!-- Toolbar -->
 <ToolBar Grid.Row="1" Style="{StaticResource ModernToolBar}">
      <Button Style="{StaticResource PrimaryButton}"
              Command="{Binding ScanTvCommand}"
     ToolTip="Scan for TV episodes (Ctrl+S when on TV tab)">
          <StackPanel Orientation="Horizontal">
              <TextBlock Text="&#xE8B2;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
           <TextBlock Text="Scan TV"/>
          </StackPanel>
      </Button>
    <Button Style="{StaticResource PrimaryButton}"
        Command="{Binding ScanMoviesCommand}"
      ToolTip="Scan for movies (Ctrl+S when on Movies tab)">
 <StackPanel Orientation="Horizontal">
    <TextBlock Text="&#xE714;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
   <TextBlock Text="Scan Movies"/>
          </StackPanel>
      </Button>
          <Separator/>
   <Button Style="{StaticResource PrimaryButton}"
      Command="{Binding ProcessCommand}"
        ToolTip="Process scanned files (Ctrl+P)">
   <StackPanel Orientation="Horizontal">
       <TextBlock Text="&#xE768;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
 <TextBlock Text="Process"/>
      </StackPanel>
      </Button>
   <Separator/>
       <Button Style="{StaticResource SecondaryButton}"
    Command="{Binding ShowExportCommand}"
     ToolTip="Export data to file (Ctrl+Shift+E)">
          <StackPanel Orientation="Horizontal">
              <TextBlock Text="&#xEDE1;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
            <TextBlock Text="Export"/>
          </StackPanel>
      </Button>
<Button Style="{StaticResource SecondaryButton}"
   Command="{Binding ShowSettingsCommand}"
    ToolTip="Open settings (Ctrl+,)">
          <StackPanel Orientation="Horizontal">
       <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
       <TextBlock Text="Settings"/>
    </StackPanel>
      </Button>
       <Button Style="{StaticResource SecondaryButton}"
    Command="{Binding ShowKeyboardShortcutsCommand}"
            ToolTip="Show keyboard shortcuts (F1)">
<StackPanel Orientation="Horizontal">
     <TextBlock Text="&#xE897;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,6,0"/>
    <TextBlock Text="Help"/>
          </StackPanel>
      </Button>
        </ToolBar>

  <!-- Phase 6: Search Panel -->
        <controls:SearchPanel Grid.Row="2"
            x:Name="MainSearchPanel"
             Visibility="{Binding IsSearchPanelVisible, Converter={StaticResource BoolToVisibilityConverter}}"
       DataContext="{Binding SearchViewModel}"/>

        <!-- Main Content Area with Tabs -->
      <TabControl x:Name="MainTabControl"
          Grid.Row="3" 
        Style="{StaticResource ModernTabControl}"
           SelectedIndex="{Binding SelectedTabIndex}">
          <TabItem Header="TV Episodes" Style="{StaticResource ModernTabItem}">
  <views:TvEpisodesView x:Name="TvEpisodesTabContent"/>
   </TabItem>
    <TabItem Header="Movies" Style="{StaticResource ModernTabItem}">
    <views:MoviesView x:Name="MoviesTabContent"/>
         </TabItem>
         <TabItem Header="Auto Monitor" Style="{StaticResource ModernTabItem}">
   <views:AutoMonitorView x:Name="AutoMonitorTabContent"/>
       </TabItem>
    </TabControl>

<!-- Status Bar -->
    <StatusBar Grid.Row="4" Style="{StaticResource ModernStatusBar}">
     <StatusBarItem>
    <TextBlock Text="{Binding StatusMessage}" 
              Margin="5,0"/>
</StatusBarItem>
       <StatusBarItem HorizontalAlignment="Right">
      <StackPanel Orientation="Horizontal">
           <ProgressBar Value="{Binding ProgressValue}" 
 Maximum="{Binding ProgressMaximum}"
          Width="200" Height="16"
   Margin="0,0,10,0"
      Style="{StaticResource ModernProgressBar}"
  Visibility="{Binding IsProgressVisible, Converter={StaticResource BoolToVisibilityConverter}}"/>
     <TextBlock Text="{Binding ProgressValue, StringFormat={}{0:0}%}" 
             Visibility="{Binding IsProgressVisible, Converter={StaticResource BoolToVisibilityConverter}}"
  Margin="0,0,10,0"/>
    <TextBlock Text="Press F1 for shortcuts" 
        FontSize="11"
                Foreground="{StaticResource TextSecondaryBrush}"
          VerticalAlignment="Center"
          Margin="10,0,0,0"/>
    </StackPanel>
     </StatusBarItem>
</StatusBar>
</Grid>
</Window>
